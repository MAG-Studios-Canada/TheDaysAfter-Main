/*********************************************************************/
/* Copyright 1998-2018 MAG Studios Canada, Inc. All Rights Reserved. */
/*********************************************************************/

#pragma once

#include "CoreMinimal.h"
#include "GameFramework/Actor.h"
#include "SurvivalGame.h"
#include "RoadSystem.generated.h"


/****************************************************************/
/*              Create Road System Variables                    */
/*such as - Left and Right Optional meshes - gutter and sidewalk*/
/*          allow access to bank width and thickness            */
/****************************************************************/

USTRUCT(BlueprintType)
struct FRoadData
{
	GENERATED_BODY()

	UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "RoadSystem")
	bool LftOptMesh;

	UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "RoadSystem")
	bool RhtOptMesh;

	UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "RoadSystem")
	bool LftOptMesh1;

	UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "RoadSystem")
	bool RhtOptMesh1;

	UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "RoadSystem")
	float RoadBank;

	UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "RoadSystem")
	float RoadWidth;

	UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "RoadSystem")
	float RoadThickness;
	UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "RoadSystem")
	bool Loops;


	FLaneData()
		{
			LftOptMesh = false;
			LftOptMesh1 = false;

			RhtOptMesh = false;
			RhtOptMesh1 = false;

			RoadBank = 0.0f;
			RoadWidth = 1.0f;
			RoadThickness = 1.0f;

			Loops = false;
		}
};

UCLASS()
class SURVIVALGAME_API ARoadSystem : public AActor
{
	GENERATED_BODY()
	
public:	
	UPROPERTY(VisibleAnywhere, BlueprintReadOnly)
	class USplineComponent* SplineComponent;

	// Sets default values for this actor's properties
	ARoadSystem();



public:	
	


	// overriden from AActor class
	virtual void OnConstruction(const FTransform& Transform) override;

	UPROPERTY(EditAnywhere, BlueprintReadWrite, Category = "RoadSystem")
	TArray<FRoadData> RoadDataArray;

	bool Loops = false;
	
	UPROPERTY(EditDefaultsOnly, BlueprintReadWrite, Category = "RoadSystem | Meshes")
	UStaticMesh* RoadMesh = nullptr;

	UPROPERTY(EditDefaultsOnly, BlueprintReadWrite, Category = "RoadSystem | Meshes")
	UStaticMesh* LftOptMesh = nullptr;

	UPROPERTY(EditDefaultsOnly, BlueprintReadWrite, Category = "RoadSystem | Meshes")
	UStaticMesh* LftOptMesh1 = nullptr;

	UPROPERTY(EditDefaultsOnly, BlueprintReadWrite, Category = "RoadSystem | Meshes")
	UStaticMesh* RhtOptMesh = nullptr;

	UPROPERTY(EditDefaultsOnly, BlueprintReadWrite, Category = "RoadSystem | Meshes")
	UStaticMesh* RhtOptMesh1 = nullptr;

	UPROPERTY(EditDefaultsOnly, BlueprintReadWrite, Category = "RoadSystem | Debug")
	bool CollisionOn = false;

	UPROPERTY(EditDefaultsOnly, BlueprintReadWrite, Category = "RoadSystem | Debug")
	bool DrawPointNumbers = false;

protected:
	virtual void BuildRoadElement(int32 LoopIndex, UStaticMesh* RoadMesh);

private:
	int32 NumberOfPoints = 0;

};
